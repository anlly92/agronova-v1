{% extends "base_header_1.html" %}
{% load static %}

{% block title %}
<title>Gestionar Lotes</title>
{% endblock %}

{% block extra_styles %}
<link rel="stylesheet" href="{% static 'css/tablas.css' %}">
<link rel="stylesheet" href="{% static 'css/filtro_lotes.css' %}">
{% endblock %}

{% block logotipo %}
Lotes
{% endblock %}

{% block nav_icons %}
<form id="formularioIngreso" action="{% url 'gestionar_lote' %}" method="post" class="form-accion">
    {% csrf_token %}
    <input type="hidden" name="elemento" id="elemento_oculto">

    <div class="link" title="Editar">
        <button type="submit" name="accion" value="editar" id="btnEditar" class="boton-actualizar">
            <i class="fas fa-arrows-rotate"></i>
        </button>
        <span>Actualizar</span>
    </div>

    <div class="boton">
        <button type="button" name="accion" id="btnEliminar" title="Eliminar">
            <i class="fas fa-trash"></i>
        </button>
        <span>Eliminar</span>
    </div>
</form>
{% endblock %}

{% block content %}

<!-- Modal de filtros -->
{% include "cafe_cardamomo/filtro_lotes.html" %}

<section class="tabla">
    <div class="tabla-scroll-wrapper">
        <form action="{% url 'gestionar_lote' %}" method="post">
            {% csrf_token %}
            <table>
                <tr>
                    <th class="primero"></th>
                    <th>Código del lote</th>
                    <th>Nombre</th>
                    <th>Hectáreas</th>
                    <th>Tipo de arbusto (Café/Cardamomo)</th>
                    <th>Cantidad maxima de arbustos</th>
                    <th>Cantidad actual de arbustos</th>
                    <th>Estado (Activo/Inactivo)</th>
                </tr>

                {% if Lotes %}
                {% for item in Lotes %}
                <tr class="radio-fila">
                    <td class="primero">
                        <input type="checkbox" name="elemento" id="lote{{ item.id_lote }}" value="{{ item.id_lote }}"
                            required>
                    </td>
                    <td><label for="lote{{ item.id_lote }}">{{ item.id_lote }}</label></td>
                    <td><label for="lote{{ item.id_lote }}">{{ item.nombre }}</label></td>
                    <td><label for="lote{{ item.id_lote }}">{{ item.hectareas|floatformat:0 }}</label></td>
                    <td><label for="lote{{ item.id_lote }}">{{ item.tipo_arbusto }}</label></td>
                    <td><label for="lote{{ item.id_lote }}">{{ item.cantidad_maxima }}</label></td>
                    <td><label for="lote{{ item.id_lote }}">{{ item.cantidad_actual }}</label></td>
                    <td><label for="lote{{ item.id_lote }}">{{ item.estado }}</label></td>
                </tr>
                {% endfor %}
                {% endif %}

                {% for i in filas_vacias %}
                <tr>
                    <td class="primero"></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
                </tr>
                {% endfor %}
                
            </table>
        </form>
    </div>
</section>

<div class="ingresar">
    <a href="{% url 'registrar_lote' %}" class="agregar-btn">+</a>
    <span class="agregar-texto">Agregar</span>
</div>

{% endblock %}