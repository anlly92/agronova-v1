{% extends "base_header_1.html" %}
{% load static %}
{% load humanize %}

{% block title %}
<title> Gestionar recolección </title>
{% endblock %}

{% block extra_styles %}
<link rel="stylesheet" href="{% static 'css/tablas.css' %}">
<link rel="stylesheet" href="{% static 'css/filtro_lotes.css' %}">
{% endblock %}

{% block logotipo %}
Recolección
{% endblock %}

{% block nav_icons %}
<section class="form-accion">
    <div class="link">
        <a href="{% url 'total_de_recoleccion' %}" class="boton-actualizar">
            <i class="fas fa-file-invoice-dollar"></i>
        </a>
        <span>Total </span>
    </div>
    
    {% if admin_es_principal %}
    <div class="boton">
        <a href="{% url 'registrar_pago' %}">
            <i class="fas fa-dollar-sign"></i>
        </a>
        <span>Pago</span>
    </div>
    {% endif %}


</section>

{%endblock%}

{% block content %}

<!-- Modal de filtros -->
{% include "cafe_cardamomo/filtro_recoleccion.html" %}
<section class="tabla">
    <div class="tabla-scroll-wrapper">
        <table>
            <tr>
                <th>Codigo de recolección</th>
                <th>Identificación del empleado</th>
                <th>Nombre del empleado</th>
                <th>Código de lote</th>
                <th>Nombre del lote</th>
                <th>Tipo de producto (Cáfe/Cardamomo)</th>
                <th>Kilos recolectados</th>
                <th>Fecha recolección</th>
                <th>Tipo de pago (Horas/Kilos)</th>
                <th>valor</th>
                <th>Horas trabajadas</th>
                <th>Total a pagar</th>
            </tr>

            {% if recolecciones %}
            {% for item in recolecciones %}
            <tr>
                <td>{{ item.id_recoleccion }}</td>
                <td>{{ item.id_empleado.id_empleado|default:"empleado inexistente" }}</td>
                <td>{{ item.nombre_empleado }}</td>
                <td>{{ item.id_lote.id_lote|default:"lote inexistente" }}</td>
                <td>{{ item.nombre_lote }}</td>
                <td>{{ item.tipo_producto }}</td>
                <td>{{ item.kilos|floatformat:0 }}</td>
                <td>{{ item.fecha|date:"d/m/Y" }}</td>
                <td>{{ item.tipo_pago.tipo_pago }}</td>
                <td>{{ item.valor_pago|intcomma }}</td>
                <td>{{ item.horas_trabajadas|floatformat:0 }}</td>
                <td>{{ item.calcular_total|floatformat:0|intcomma }}</td>
            </tr>

            {% endfor %}
            {% endif %}

            {% for i in filas_vacias %}
                <tr>
                    <td class="primero"></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td>
                </tr>
            {% endfor %}
        </table>
    </div>
</section>

<div class="ingresar">
    <a href="{% url 'registrar_recoleccion' %}" class="agregar-btn">+</a>
    <span class="agregar-texto">Agregar</span>
</div>
{%endblock%}